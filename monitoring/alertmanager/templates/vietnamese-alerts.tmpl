{{/* =====================================================
VIETNAMESE EMAIL TEMPLATES FOR ALERTMANAGER
Airbnb WebApp - Vietnamese Alert Notifications
===================================================== */}}

{{/* Default Alert Template */}}
{{ define "airbnb.default" }}
ğŸš¨ **Cáº£nh bÃ¡o há»‡ thá»‘ng Airbnb WebApp**

**ThÃ´ng tin chung**:
â€¢ Thá»i gian: {{ .CommonAnnotations.timestamp | default (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ Sá»‘ lÆ°á»£ng cáº£nh bÃ¡o: {{ len .Alerts }}
â€¢ Tráº¡ng thÃ¡i: {{ .Status | upper }}
â€¢ Má»©c Ä‘á»™: {{ .CommonLabels.severity | default "khÃ´ng xÃ¡c Ä‘á»‹nh" }}

**Chi tiáº¿t cÃ¡c cáº£nh bÃ¡o**:
{{ range .Alerts }}
â–«ï¸ **{{ .Annotations.summary | default .Labels.alertname }}**
   ğŸ“‹ MÃ´ táº£: {{ .Annotations.description | default "KhÃ´ng cÃ³ mÃ´ táº£" }}
   ğŸ·ï¸ Dá»‹ch vá»¥: {{ .Labels.service | default "unknown" }}
   ğŸ“ Instance: {{ .Labels.instance | default "N/A" }}
   â° Báº¯t Ä‘áº§u: {{ .StartsAt.Format "02/01/2006 15:04:05" }}
   {{ if .EndsAt }}â¹ï¸ Káº¿t thÃºc: {{ .EndsAt.Format "02/01/2006 15:04:05" }}{{ end }}
   
{{ end }}

**Links há»¯u Ã­ch**:
â€¢ Dashboard tá»•ng quan: http://localhost:3000
â€¢ Logs há»‡ thá»‘ng: http://localhost:5601  
â€¢ Health check: http://localhost:8000/health
â€¢ Prometheus: http://localhost:9090

---
Há»‡ thá»‘ng giÃ¡m sÃ¡t Airbnb WebApp
{{ end }}

{{/* Critical Database Alert Template */}}
{{ define "airbnb.database.critical" }}
ğŸ”´ **Sá»° Cá» KHáº¨N Cáº¤P - CÆ  Sá» Dá»® LIá»†U**

âš ï¸ **TÃŒNH TRáº NG**: CÆ¡ sá»Ÿ dá»¯ liá»‡u Airbnb Ä‘ang gáº·p sá»± cá»‘ nghiÃªm trá»ng!

**ThÃ´ng tin sá»± cá»‘**:
â€¢ ğŸ• Thá»i gian phÃ¡t hiá»‡n: {{ (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ ğŸ¯ Database: {{ .CommonLabels.database | default "airbnb_app" }}
â€¢ ğŸ–¥ï¸ Server: {{ .CommonLabels.instance }}
â€¢ âš¡ Tráº¡ng thÃ¡i: {{ .Status }}

**Chi tiáº¿t cÃ¡c lá»—i**:
{{ range .Alerts }}
ğŸš¨ **{{ .Annotations.summary }}**
   ğŸ“ MÃ´ táº£: {{ .Annotations.description }}
   ğŸ“Š GiÃ¡ trá»‹ hiá»‡n táº¡i: {{ .Annotations.value | default "N/A" }}
   ğŸ“ˆ NgÆ°á»¡ng cáº£nh bÃ¡o: {{ .Annotations.threshold | default "N/A" }}
   
{{ end }}

**ğŸš€ HÃ€NH Äá»˜NG NGAY Láº¬P Tá»¨C**:
1. âœ… Kiá»ƒm tra káº¿t ná»‘i database: `docker exec airbnb_postgres pg_isready`
2. ğŸ” Xem logs PostgreSQL: `docker logs airbnb_postgres --tail 50`
3. ğŸ’¾ Kiá»ƒm tra disk space: `df -h`
4. ğŸ§  Kiá»ƒm tra memory: `free -h`
5. ğŸ“ LiÃªn há»‡ team DevOps náº¿u váº¥n Ä‘á» váº«n tiáº¿p diá»…n

**ğŸ“Š MONITORING DASHBOARDS**:
â€¢ Database monitoring: http://localhost:3000/d/postgres
â€¢ System resources: http://localhost:3000/d/system
â€¢ Application logs: http://localhost:5601/app/discover

**âš ï¸ IMPACT**: 
- Há»‡ thá»‘ng booking cÃ³ thá»ƒ bá»‹ giÃ¡n Ä‘oáº¡n
- KhÃ¡ch hÃ ng cÃ³ thá»ƒ khÃ´ng thá»ƒ Ä‘áº·t phÃ²ng
- Dá»¯ liá»‡u thanh toÃ¡n cÃ³ thá»ƒ bá»‹ áº£nh hÆ°á»Ÿng

**Äá»™ Æ°u tiÃªn**: KHáº¨N Cáº¤P - Cáº§n xá»­ lÃ½ trong vÃ²ng 5 phÃºt!
{{ end }}

{{/* Performance Warning Template */}}
{{ define "airbnb.performance.warning" }}
âš ï¸ **Cáº¢NH BÃO HIá»†U SUáº¤T Há»† THá»NG**

**TÃ¬nh tráº¡ng**: Hiá»‡u suáº¥t há»‡ thá»‘ng Airbnb Ä‘ang giáº£m

**ThÃ´ng tin cáº£nh bÃ¡o**:
â€¢ ğŸ• Thá»i gian: {{ (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ ğŸ¯ Dá»‹ch vá»¥: {{ .CommonLabels.service | default "airbnb-webapp" }}
â€¢ ğŸ“ Component: {{ .CommonLabels.component | default "application" }}

**Chi tiáº¿t hiá»‡u suáº¥t**:
{{ range .Alerts }}
ğŸ“Š **{{ .Annotations.summary }}**
   ğŸ“ Váº¥n Ä‘á»: {{ .Annotations.description }}
   ğŸ“ˆ GiÃ¡ trá»‹ hiá»‡n táº¡i: {{ .Annotations.value }}
   ğŸ¯ NgÆ°á»¡ng cáº£nh bÃ¡o: {{ .Annotations.threshold }}
   ğŸ“ ÄÆ¡n vá»‹: {{ .Annotations.unit | default "" }}
   
{{ end }}

**ğŸ” CÃC CHá»ˆ Sá» Cáº¦N KIá»‚M TRA**:
â€¢ CPU Usage: Kiá»ƒm tra táº£i xá»­ lÃ½
â€¢ Memory Usage: Kiá»ƒm tra sá»­ dá»¥ng RAM
â€¢ Database Queries: Xem slow queries
â€¢ API Response Time: Thá»i gian pháº£n há»“i
â€¢ Concurrent Users: Sá»‘ ngÆ°á»i dÃ¹ng Ä‘á»“ng thá»i

**ğŸ“Š PERFORMANCE DASHBOARDS**:
â€¢ Tá»•ng quan hiá»‡u suáº¥t: http://localhost:3000/d/app-performance
â€¢ Database performance: http://localhost:3000/d/postgres-performance  
â€¢ API metrics: http://localhost:3000/d/api-metrics
â€¢ System resources: http://localhost:3000/d/system-resources

**ğŸ’¡ HÃ€NH Äá»˜NG ÄÆ¯á»¢C Äá»€ XUáº¤T**:
1. Kiá»ƒm tra top processes: `htop` hoáº·c `docker stats`
2. Xem slow queries: Check PostgreSQL slow query log
3. Theo dÃµi API response times
4. Kiá»ƒm tra sá»‘ lÆ°á»£ng active connections
5. Restart services náº¿u cáº§n thiáº¿t

**â° Má»©c Ä‘á»™ Æ°u tiÃªn**: Trung bÃ¬nh - Cáº§n xá»­ lÃ½ trong 30 phÃºt
{{ end }}

{{/* Business Metrics Alert Template */}}
{{ define "airbnb.business.alert" }}
ğŸ“Š **Cáº¢NH BÃO CHá»ˆ Sá» KINH DOANH**

**TÃ¬nh tráº¡ng**: PhÃ¡t hiá»‡n báº¥t thÆ°á»ng trong chá»‰ sá»‘ kinh doanh

**ThÃ´ng tin cáº£nh bÃ¡o**:
â€¢ ğŸ• Thá»i gian: {{ (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ ğŸ“ˆ Loáº¡i metric: {{ .CommonLabels.metric_type | default "business_kpi" }}
â€¢ ğŸ¢ Pháº¡m vi: {{ .CommonLabels.scope | default "toÃ n há»‡ thá»‘ng" }}

**Chi tiáº¿t cÃ¡c chá»‰ sá»‘**:
{{ range .Alerts }}
ğŸ“Š **{{ .Annotations.summary }}**
   ğŸ“ MÃ´ táº£: {{ .Annotations.description }}
   ğŸ’° GiÃ¡ trá»‹ hiá»‡n táº¡i: {{ .Annotations.value }}{{ if .Annotations.currency }} {{ .Annotations.currency }}{{ end }}
   ğŸ¯ GiÃ¡ trá»‹ mong Ä‘á»£i: {{ .Annotations.expected }}{{ if .Annotations.currency }} {{ .Annotations.currency }}{{ end }}
   ğŸ“‰ Äá»™ lá»‡ch: {{ .Annotations.deviation | default "N/A" }}
   
{{ end }}

**ğŸ“ˆ CÃC CHá»ˆ Sá» KINH DOANH QUAN TRá»ŒNG**:
â€¢ ğŸ’° Doanh thu hÃ ng ngÃ y/tuáº§n/thÃ¡ng
â€¢ ğŸ  Sá»‘ lÆ°á»£ng booking má»›i
â€¢ ğŸ“‰ Tá»· lá»‡ há»§y booking
â€¢ â­ ÄÃ¡nh giÃ¡ trung bÃ¬nh tá»« khÃ¡ch hÃ ng
â€¢ ğŸ• Thá»i gian pháº£n há»“i trung bÃ¬nh
â€¢ ğŸ’³ GiÃ¡ trá»‹ giao dá»‹ch trung bÃ¬nh

**ğŸ“Š BUSINESS DASHBOARDS**:
â€¢ Revenue tracking: http://localhost:3000/d/revenue
â€¢ Booking analytics: http://localhost:3000/d/bookings  
â€¢ Customer metrics: http://localhost:3000/d/customers
â€¢ Property performance: http://localhost:3000/d/properties

**ğŸ¯ HÃ€NH Äá»˜NG KINH DOANH**:
1. Kiá»ƒm tra trends trong tuáº§n/thÃ¡ng qua
2. So sÃ¡nh vá»›i cÃ¹ng ká»³ nÄƒm trÆ°á»›c
3. PhÃ¢n tÃ­ch nguyÃªn nhÃ¢n gÃ¢y ra báº¥t thÆ°á»ng
4. ÄÃ¡nh giÃ¡ impact lÃªn revenue
5. LÃªn káº¿ hoáº¡ch hÃ nh Ä‘á»™ng kháº¯c phá»¥c

**ğŸ‘¥ ThÃ´ng bÃ¡o Ä‘áº¿n**: Business Team, Management
{{ end }}

{{/* Security Alert Template */}}
{{ define "airbnb.security.alert" }}
ğŸ›¡ï¸ **Cáº¢NH BÃO Báº¢O Máº¬T Há»† THá»NG**

**âš ï¸ PHÃT HIá»†N HOáº T Äá»˜NG ÄÃNG NGá»œ**

**ThÃ´ng tin báº£o máº­t**:
â€¢ ğŸ• Thá»i gian phÃ¡t hiá»‡n: {{ (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ ğŸ¯ Loáº¡i threat: {{ .CommonLabels.threat_type | default "unknown" }}
â€¢ ğŸ“ Source IP: {{ .CommonLabels.source_ip | default "N/A" }}
â€¢ ğŸŒ Location: {{ .CommonLabels.location | default "unknown" }}

**Chi tiáº¿t cÃ¡c sá»± kiá»‡n báº£o máº­t**:
{{ range .Alerts }}
ğŸš¨ **{{ .Annotations.summary }}**
   ğŸ“ MÃ´ táº£: {{ .Annotations.description }}
   ğŸŒ IP Address: {{ .Labels.source_ip }}
   ğŸ–¥ï¸ User Agent: {{ .Labels.user_agent | default "N/A" }}
   ğŸ“Š Sá»‘ láº§n thá»­: {{ .Annotations.attempt_count | default "1" }}
   ğŸ¯ Target: {{ .Labels.target | default "N/A" }}
   
{{ end }}

**ğŸ”’ CÃC LOáº I THREAT THÆ¯á»œNG Gáº¶P**:
â€¢ ğŸ”‘ Brute force login attempts
â€¢ ğŸ•·ï¸ SQL injection attempts  
â€¢ ğŸŒ Suspicious IP addresses
â€¢ ğŸ“Š Unusual API usage patterns
â€¢ ğŸ” Failed authentication spikes
â€¢ ğŸ“ Unauthorized file access

**ğŸ›¡ï¸ SECURITY DASHBOARDS**:
â€¢ Security overview: http://localhost:3000/d/security
â€¢ Access logs: http://localhost:5601/app/discover
â€¢ Failed logins: http://localhost:3000/d/auth-failures
â€¢ IP reputation: http://localhost:3000/d/ip-analysis

**ğŸš¨ HÃ€NH Äá»˜NG Báº¢O Máº¬T**:
1. ğŸ” Kiá»ƒm tra access logs chi tiáº¿t
2. ğŸš« Block suspicious IP náº¿u cáº§n
3. ğŸ“Š PhÃ¢n tÃ­ch pattern táº¥n cÃ´ng
4. ğŸ” Kiá»ƒm tra user accounts
5. ğŸ“ ThÃ´ng bÃ¡o Security Team
6. ğŸ“ Document incident Ä‘á»ƒ phÃ¢n tÃ­ch

**âš¡ Má»©c Ä‘á»™ Æ°u tiÃªn**: {{ .CommonLabels.severity | upper }}
**ğŸ‘¥ Escalate Ä‘áº¿n**: Security Team, DevOps Team

{{ if eq .CommonLabels.severity "critical" }}
ğŸ”´ **CRITICAL**: Cáº§n xá»­ lÃ½ ngay láº­p tá»©c!
{{ else if eq .CommonLabels.severity "warning" }}
ğŸŸ¡ **WARNING**: Cáº§n theo dÃµi vÃ  xá»­ lÃ½ trong 1 giá»
{{ else }}
ğŸ”µ **INFO**: Ghi nháº­n Ä‘á»ƒ phÃ¢n tÃ­ch
{{ end }}
{{ end }}

{{/* Booking System Alert Template */}}
{{ define "airbnb.booking.alert" }}
ğŸ  **Cáº¢NH BÃO Há»† THá»NG Äáº¶T PHÃ’NG**

**TÃ¬nh tráº¡ng**: PhÃ¡t hiá»‡n váº¥n Ä‘á» trong há»‡ thá»‘ng booking

**ThÃ´ng tin cáº£nh bÃ¡o**:
â€¢ ğŸ• Thá»i gian: {{ (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ ğŸ  Dá»‹ch vá»¥: Há»‡ thá»‘ng Ä‘áº·t phÃ²ng
â€¢ ğŸ“ Component: {{ .CommonLabels.component | default "booking-service" }}

**Chi tiáº¿t váº¥n Ä‘á»**:
{{ range .Alerts }}
ğŸ  **{{ .Annotations.summary }}**
   ğŸ“ MÃ´ táº£: {{ .Annotations.description }}
   ğŸ·ï¸ Property ID: {{ .Labels.property_id | default "N/A" }}
   ğŸ“‹ Booking ID: {{ .Labels.booking_id | default "N/A" }}
   ğŸ‘¤ User ID: {{ .Labels.user_id | default "N/A" }}
   ğŸ’° Amount: {{ .Labels.amount | default "N/A" }} VND
   
{{ end }}

**ğŸ  IMPACT Äá»I Vá»šI KHÃCH HÃ€NG**:
â€¢ KhÃ¡ch hÃ ng cÃ³ thá»ƒ khÃ´ng Ä‘áº·t Ä‘Æ°á»£c phÃ²ng
â€¢ Lá»—i khi xá»­ lÃ½ thanh toÃ¡n
â€¢ ThÃ´ng tin booking cÃ³ thá»ƒ khÃ´ng cáº­p nháº­t
â€¢ Email xÃ¡c nháº­n cÃ³ thá»ƒ bá»‹ delay
â€¢ Calendar availability cÃ³ thá»ƒ sai

**ğŸ“Š BOOKING MONITORING**:
â€¢ Booking dashboard: http://localhost:3000/d/bookings
â€¢ Property analytics: http://localhost:3000/d/properties
â€¢ Payment flow: http://localhost:3000/d/payments
â€¢ Customer journey: http://localhost:3000/d/customer-flow

**ğŸ”§ TROUBLESHOOTING STEPS**:
1. ğŸ” Kiá»ƒm tra booking API endpoints
2. ğŸ“Š Xem booking success rate
3. ğŸ’¾ Kiá»ƒm tra database connections
4. ğŸ“§ Verify email service status
5. ğŸ—“ï¸ Check calendar sync status
6. ğŸ’³ Validate payment gateway

**ğŸ“ LiÃªn há»‡ ngay**: Booking Team, Customer Support
**â° SLA**: Xá»­ lÃ½ trong 15 phÃºt Ä‘á»ƒ trÃ¡nh máº¥t khÃ¡ch hÃ ng
{{ end }}

{{/* Payment System Alert Template */}}
{{ define "airbnb.payment.alert" }}
ğŸ’³ **Cáº¢NH BÃO Há»† THá»NG THANH TOÃN**

**ğŸš¨ PHÃT HIá»†N Váº¤N Äá»€ THANH TOÃN**

**ThÃ´ng tin cáº£nh bÃ¡o**:
â€¢ ğŸ• Thá»i gian: {{ (index .Alerts 0).StartsAt.Format "02/01/2006 15:04:05" }}
â€¢ ğŸ’³ Dá»‹ch vá»¥: Xá»­ lÃ½ thanh toÃ¡n
â€¢ ğŸ¦ Gateway: {{ .CommonLabels.payment_gateway | default "default" }}
â€¢ ğŸ“ Environment: {{ .CommonLabels.environment | default "production" }}

**Chi tiáº¿t váº¥n Ä‘á» thanh toÃ¡n**:
{{ range .Alerts }}
ğŸ’³ **{{ .Annotations.summary }}**
   ğŸ“ MÃ´ táº£: {{ .Annotations.description }}
   ğŸ†” Payment ID: {{ .Labels.payment_id | default "N/A" }}
   ğŸ’° Sá»‘ tiá»n: {{ .Labels.amount | default "N/A" }} VND
   ğŸ‘¤ Customer ID: {{ .Labels.customer_id | default "N/A" }}
   ğŸ  Booking ID: {{ .Labels.booking_id | default "N/A" }}
   ğŸ“Š Error code: {{ .Labels.error_code | default "N/A" }}
   
{{ end }}

**ğŸ’° IMPACT TÃ€I CHÃNH**:
â€¢ Revenue cÃ³ thá»ƒ bá»‹ áº£nh hÆ°á»Ÿng
â€¢ Giao dá»‹ch cÃ³ thá»ƒ bá»‹ tháº¥t báº¡i
â€¢ KhÃ¡ch hÃ ng cÃ³ thá»ƒ khÃ´ng thanh toÃ¡n Ä‘Æ°á»£c
â€¢ Refund process cÃ³ thá»ƒ bá»‹ delay
â€¢ Financial reporting cÃ³ thá»ƒ sai lá»‡ch

**ğŸ’³ PAYMENT MONITORING**:
â€¢ Payment dashboard: http://localhost:3000/d/payments
â€¢ Transaction logs: http://localhost:5601/app/discover
â€¢ Revenue tracking: http://localhost:3000/d/revenue
â€¢ Gateway status: http://localhost:3000/d/payment-gateway

**ğŸ”§ PAYMENT TROUBLESHOOTING**:
1. ğŸ” Kiá»ƒm tra payment gateway status
2. ğŸ“Š Xem payment success/failure rate
3. ğŸ¦ Verify banking API connections
4. ğŸ’¾ Check transaction logs
5. ğŸ“§ Review payment notifications
6. ğŸ”„ Test payment flow manually

**ğŸ“ ESCALATION**:
â€¢ Payment Team: Ngay láº­p tá»©c
â€¢ Finance Team: Trong 30 phÃºt
â€¢ Banking Partner: Náº¿u cáº§n thiáº¿t
â€¢ Customer Support: Äá»ƒ há»— trá»£ khÃ¡ch hÃ ng

**âš ï¸ SLA QUAN TRá»ŒNG**:
- PhÃ¡t hiá»‡n: < 5 phÃºt
- Pháº£n há»“i: < 15 phÃºt  
- Kháº¯c phá»¥c: < 1 giá»
- Communication: Ngay khi cÃ³ update

**ğŸ¯ Má»©c Ä‘á»™ Æ°u tiÃªn**: {{ .CommonLabels.severity | upper }}
{{ end }}

{{/* Resolved Alert Template */}}
{{ define "airbnb.resolved" }}
âœ… **ÄÃƒ KHáº®C PHá»¤C - Cáº£nh bÃ¡o há»‡ thá»‘ng Airbnb**

**ğŸ‰ GOOD NEWS**: CÃ¡c váº¥n Ä‘á» sau Ä‘Ã£ Ä‘Æ°á»£c kháº¯c phá»¥c!

**ThÃ´ng tin kháº¯c phá»¥c**:
â€¢ ğŸ• Thá»i gian kháº¯c phá»¥c: {{ (index .Alerts 0).EndsAt.Format "02/01/2006 15:04:05" }}
â€¢ â±ï¸ Thá»i gian downtime: {{ sub (index .Alerts 0).EndsAt (index .Alerts 0).StartsAt }}
â€¢ ğŸ”§ Tráº¡ng thÃ¡i: ÄÃƒ KHáº®C PHá»¤C

**CÃ¡c váº¥n Ä‘á» Ä‘Ã£ Ä‘Æ°á»£c giáº£i quyáº¿t**:
{{ range .Alerts }}
âœ… **{{ .Annotations.summary }}**
   ğŸ“ Váº¥n Ä‘á»: {{ .Annotations.description }}
   ğŸ• Báº¯t Ä‘áº§u: {{ .StartsAt.Format "02/01/2006 15:04:05" }}
   âœ… Káº¿t thÃºc: {{ .EndsAt.Format "02/01/2006 15:04:05" }}
   
{{ end }}

**ğŸ“Š SYSTEM STATUS**:
â€¢ âœ… Táº¥t cáº£ services Ä‘Ã£ hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng
â€¢ âœ… Database connections stable
â€¢ âœ… API response times normal
â€¢ âœ… Customer experience restored

**ğŸ“ˆ NEXT STEPS**:
1. ğŸ“Š Theo dÃµi metrics trong 24h tá»›i
2. ğŸ“ Táº¡o incident report
3. ğŸ” Root cause analysis
4. ğŸ› ï¸ Implement preventive measures
5. ğŸ“š Update runbooks

**ğŸ“Š Monitoring dashboards**:
â€¢ System health: http://localhost:3000/d/overview
â€¢ All metrics: http://localhost:9090

Cáº£m Æ¡n team Ä‘Ã£ xá»­ lÃ½ nhanh chÃ³ng! ğŸ™
{{ end }}